<!doctype html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>rememberRetained</title>
<link href="../../images/logo-icon.svg" rel="icon" type="image/svg">    <script>var pathToRoot = "../../";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async></script>
<script type="text/javascript" src="../../scripts/sourceset_dependencies.js" async></script>
<link href="../../styles/style.css" rel="Stylesheet">
<link href="../../styles/main.css" rel="Stylesheet">
<link href="../../styles/prism.css" rel="Stylesheet">
<link href="../../styles/logo-styles.css" rel="Stylesheet">
<link href="../../styles/font-jb-sans-auto.css" rel="Stylesheet">
<link href="../../ui-kit/ui-kit.min.css" rel="Stylesheet">
<script type="text/javascript" src="../../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../ui-kit/ui-kit.min.js" defer></script>
<script type="text/javascript" src="../../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
    <div class="root">
    <nav class="navigation theme-dark" id="navigation-wrapper">
<a class="library-name--link" href="../../index.html">
                    circuit-root
            </a>        <button class="navigation-controls--btn navigation-controls--btn_toc ui-kit_mobile-only" id="toc-toggle" type="button">Toggle table of contents
        </button>
        <div class="navigation-controls--break ui-kit_mobile-only"></div>
        <div class="library-version" id="library-version">
        </div>
        <div class="navigation-controls">
        <div class="filter-section filter-section_loading" id="filter-section">
                <button class="platform-tag platform-selector common-like" data-active="" data-filter=":circuit-retained/commonMain">common</button>
            <div class="dropdown filter-section--dropdown" data-role="dropdown" id="filter-section-dropdown">
                <button class="button button_dropdown filter-section--dropdown-toggle" role="combobox" data-role="dropdown-toggle" aria-controls="platform-tags-listbox" aria-haspopup="listbox" aria-expanded="false" aria-label="Toggle source sets"></button>
                <ul role="listbox" id="platform-tags-listbox" class="dropdown--list" data-role="dropdown-listbox">
                    <div class="dropdown--header"><span>Platform filter</span>
                        <button class="button" data-role="dropdown-toggle" aria-label="Close platform filter">
                            <i class="ui-kit-icon ui-kit-icon_cross"></i>
                        </button>
                    </div>
                        <li role="option" class="dropdown--option platform-selector-option common-like" tabindex="0">
                            <label class="checkbox">
                                <input type="checkbox" class="checkbox--input" id=":circuit-retained/commonMain" data-filter=":circuit-retained/commonMain">
                                <span class="checkbox--icon"></span>
                                common
                            </label>
                        </li>
                </ul>
                <div class="dropdown--overlay"></div>
            </div>
        </div>
            <button class="navigation-controls--btn navigation-controls--btn_theme" id="theme-toggle-button" type="button">Switch theme
            </button>
            <div class="navigation-controls--btn navigation-controls--btn_search" id="searchBar" role="button">Search in
                API
            </div>
        </div>
    </nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="dropdown theme-dark_mobile" data-role="dropdown" id="toc-dropdown">
                    <ul role="listbox" id="toc-listbox" class="dropdown--list dropdown--list_toc-list" data-role="dropdown-listbox">
                        <div class="dropdown--header">
                            <span>
                                    circuit-root
                            </span>
                            <button class="button" data-role="dropdown-toggle" aria-label="Close table of contents">
                                <i class="ui-kit-icon ui-kit-icon_cross"></i>
                            </button>
                        </div>
                        <div class="sidebar--inner" id="sideMenu"></div>
                    </ul>
                    <div class="dropdown--overlay"></div>
                </div>
            </div>
            <div id="main">
<div class="main-content" data-page-type="member" id="content" pageids="circuit-retained::com.slack.circuit.retained//rememberRetained/#kotlin.Array[kotlin.Any?]#kotlin.String?#kotlin.Function0[TypeParam(bounds=[kotlin.Any])]/PointingToDeclaration//-1899959021">
  <div class="breadcrumbs"><a href="../index.html">circuit-retained</a><span class="delimiter">/</span><a href="index.html">com.slack.circuit.retained</a><span class="delimiter">/</span><span class="current">rememberRetained</span></div>
  <div class="cover ">
    <h1 class="cover"><span>remember</span><wbr><span><span>Retained</span></span></h1>
  </div>
  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":circuit-retained/commonMain"><div class="symbol monospace"><div class="block"><div class="block"><span class="token annotation builtin">@</span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/Composable.html"><span class="token annotation builtin">Composable</span></a></div></div><span class="token keyword">fun </span><span class="token operator">&lt;</span><a href="remember-retained.html">T</a><span class="token operator"> : </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-any/index.html">Any</a><span class="token operator">&gt; </span><a href="remember-retained.html"><span class="token function">rememberRetained</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword">vararg </span>inputs<span class="token operator">: </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-any/index.html">Any</a><span class="token operator">?</span><span class="token punctuation">, </span></span><span class="parameter ">key<span class="token operator">: </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-string/index.html">String</a><span class="token operator">?</span><span class="token operator"> = </span>null<span class="token punctuation">, </span></span><span class="parameter ">init<span class="token operator">: </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><a href="remember-retained.html">T</a></span></span><span class="token punctuation">)</span><span class="token operator">: </span><a href="remember-retained.html">T</a><span class="clearfix"><span class="floating-right">(<a href="https://github.com/slackhq/circuit//tree/main/circuit-retained/src/commonMain/kotlin/com/slack/circuit/retained/RememberRetained.kt#L91">source</a>)</span></span></div><p class="paragraph">Remember the value produced by <a href="remember-retained.html">init</a>.</p><p class="paragraph">It behaves similarly to <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary.html">remember</a>, but the stored value will survive configuration changes, such as a screen rotation.</p><p class="paragraph">You can use it with a value stored inside <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary.html">mutableStateOf</a>.</p><p class="paragraph">This differs from <code class="lang-kotlin">rememberSaveable</code> by not being tied to Android bundles or parcelable. You should take care to ensure that the state computed by <a href="remember-retained.html">init</a> does not capture anything that is not safe to persist across reconfiguration, such as Navigators. The same caveats of <code class="lang-kotlin">rememberSaveable</code> also still apply (i.e. do not retain Android Contexts, Views, etc).</p><p class="paragraph">However, it does not participate in saved instance state either, so care should be taken to choose the right retention mechanism for your use case. Consider the below two examples.</p><p class="paragraph">The first case will retain <code class="lang-kotlin">state</code> across configuration changes and the back stack but will <i>not</i> survive process death.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">@Composable<br>override fun present(): CounterState {<br>  var state by rememberRetained { mutableStateOf(CounterState(0)) }<br><br>  return CounterState(count) { event -&gt;<br>    when (event) {<br>      is CounterEvent.Increment -&gt; state = state.copy(count = state.count + 1)<br>      is CounterEvent.Decrement -&gt; state = state.copy(count = state.count - 1)<br>    }<br>  }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">This second case will retain <code class="lang-kotlin">count</code> across configuration changes, the back stack, <i>and</i> survive process death. However, it only works with primitives or implicitly Saveable (i.e. <code class="lang-kotlin">Parcelable</code> on Android) state types.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">@Composable<br>override fun present(): CounterState {<br>  var count by rememberSaveable { mutableStateOf(0) }<br><br>  return CounterState(count) { event -&gt;<br>    when (event) {<br>      is CounterEvent.Increment -&gt; state = count++<br>      is CounterEvent.Decrement -&gt; state = count--<br>    }<br>  }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class="">Layering</h2><p class="paragraph">There is also an overload of <a href="remember-retained.html">rememberRetained</a> that takes a <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/Saver.html">Saver</a>, which participates in both the saved state registry system and retaining. Alternatively, use <a href="remember-retained-saveable.html">rememberRetainedSaveable</a> for one that uses <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/package-summary.html">autoSaver</a>. These can be used to persist state across multiple layers, allowing for both the caching of <a href="remember-retained.html">rememberRetained</a> while also the process-death-survival of saveable.</p><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>inputs</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A set of inputs such that, when any of them have changed, will cause the state to reset and <a href="remember-retained.html">init</a> to be rerun</p></div></div></div></div><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>key</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional key to be used as a key for the saved value. If not provided we use the automatically generated by the Compose runtime which is unique for the every exact code location in the composition tree</p></div></div></div></div><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>init</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A factory function to create the initial value of this state</p></div></div></div></div></div><hr><div class="symbol monospace"><div class="block"><div class="block"><span class="token annotation builtin">@</span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/Composable.html"><span class="token annotation builtin">Composable</span></a></div></div><span class="token keyword">fun </span><span class="token operator">&lt;</span><a href="remember-retained.html">T</a><span class="token operator"> : </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-any/index.html">Any</a><span class="token operator">&gt; </span><a href="remember-retained.html"><span class="token function">rememberRetained</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword">vararg </span>inputs<span class="token operator">: </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-any/index.html">Any</a><span class="token operator">?</span><span class="token punctuation">, </span></span><span class="parameter ">saver<span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/Saver.html">Saver</a><span class="token operator">&lt;</span><a href="remember-retained.html">T</a><span class="token punctuation">, </span><span class="token keyword">out </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-any/index.html">Any</a><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter ">key<span class="token operator">: </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-string/index.html">String</a><span class="token operator">?</span><span class="token operator"> = </span>null<span class="token punctuation">, </span></span><span class="parameter ">init<span class="token operator">: </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><a href="remember-retained.html">T</a></span></span><span class="token punctuation">)</span><span class="token operator">: </span><a href="remember-retained.html">T</a><span class="clearfix"><span class="floating-right">(<a href="https://github.com/slackhq/circuit//tree/main/circuit-retained/src/commonMain/kotlin/com/slack/circuit/retained/RememberRetained.kt#L140">source</a>)</span></span></div><p class="paragraph">Remember the value produced by <a href="remember-retained.html">init</a>.</p><p class="paragraph">It behaves similarly to <a href="remember-retained.html">rememberRetained</a> by retaining the value in memory, but with an additional <a href="remember-retained.html">saver</a> parameter that will opportunistically save the value to saved instance state.</p><p class="paragraph">The retained value will be the source of truth for the value, except in the case where the process was killed, and the value is being restored. In that situation only, the most recent value recovered from the saveable state registry will be used instead of the value provided by <a href="remember-retained.html">init</a>.</p><p class="paragraph">Importantly, the most recent value persisted in saveable state may lag behind the value that is saved in memory. For example, on Android, saved state will be collected when an Activity is backgrounded and onStop is called. The retained value might continue to be updated while in the background, but those updates will not be reflected in the saved state. If the process is killed before the app has returned to the foreground, these background updates will be lost, as the restored saved state will have been taken before the background updates occurred.</p><p class="paragraph">Therefore, <a href="remember-retained.html">saver</a> should only store and restore information that is logically safe to have an out-of-date view of.</p><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>inputs</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A set of inputs such that, when any of them have changed, will cause the state to reset and <a href="remember-retained.html">init</a> to be rerun</p></div></div></div></div><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>saver</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/Saver.html">Saver</a> object which defines how the state is saved and restored.</p></div></div></div></div><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>key</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional key to be used as a key for the saved value. If not provided we use the automatically generated by the Compose runtime which is unique for the every exact code location in the composition tree</p></div></div></div></div><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>init</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A factory function to create the initial value of this state</p></div></div></div></div></div><hr><div class="symbol monospace"><div class="block"><div class="block"><span class="token annotation builtin">@</span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/Composable.html"><span class="token annotation builtin">Composable</span></a></div></div><span class="token keyword">fun </span><span class="token operator">&lt;</span><a href="remember-retained.html">T</a><span class="token operator">&gt; </span><a href="remember-retained.html"><span class="token function">rememberRetained</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword">vararg </span>inputs<span class="token operator">: </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-any/index.html">Any</a><span class="token operator">?</span><span class="token punctuation">, </span></span><span class="parameter ">stateSaver<span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/Saver.html">Saver</a><span class="token operator">&lt;</span><a href="remember-retained.html">T</a><span class="token punctuation">, </span><span class="token keyword">out </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-any/index.html">Any</a><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter ">key<span class="token operator">: </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-string/index.html">String</a><span class="token operator">?</span><span class="token operator"> = </span>null<span class="token punctuation">, </span></span><span class="parameter ">init<span class="token operator">: </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/MutableState.html">MutableState</a><span class="token operator">&lt;</span><a href="remember-retained.html">T</a><span class="token operator">&gt;</span></span></span><span class="token punctuation">)</span><span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/MutableState.html">MutableState</a><span class="token operator">&lt;</span><a href="remember-retained.html">T</a><span class="token operator">&gt;</span><span class="clearfix"><span class="floating-right">(<a href="https://github.com/slackhq/circuit//tree/main/circuit-retained/src/commonMain/kotlin/com/slack/circuit/retained/RememberRetained.kt#L217">source</a>)</span></span></div><p class="paragraph">Remember the value produced by <a href="remember-retained.html">init</a>.</p><p class="paragraph">It behaves similarly to <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary.html">remember</a>, but the stored value will survive configuration changes, such as a screen rotation.</p><p class="paragraph">Use this overload if you remember a mutable state to specify a <a href="remember-retained.html">stateSaver</a> for the value contained inside the <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/MutableState.html">MutableState</a>.</p><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>inputs</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A set of inputs such that, when any of them have changed, will cause the state to reset and <a href="remember-retained.html">init</a> to be rerun</p></div></div></div></div><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>state</span><wbr><span><span>Saver</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/Saver.html">Saver</a> object which defines how the value inside the MutableState is saved and restored.</p></div></div></div></div><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>key</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional key to be used as a key for the saved value. If not provided we use the automatically generated by the Compose runtime which is unique for the every exact code location in the composition tree</p></div></div></div></div><div class="table-row" data-filterable-current=":circuit-retained/commonMain" data-filterable-set=":circuit-retained/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>init</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A factory function to create the initial value of this state</p></div></div></div></div></div></div></div>
</div>
    <div class="footer">
        <a href="#content" id="go-to-top-link" class="footer--button footer--button_go-to-top"></a>
        <span>Â© 2025 Copyright</span>
        <span class="pull-right">
            <span>Generated by </span>
            <a class="footer--link footer--link_external" href="https://github.com/Kotlin/dokka">
                <span>dokka</span>
            </a>
        </span>
    </div>
            </div>
        </div>
    </div>
</body>
</html>
